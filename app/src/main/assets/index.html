<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="index.css" type="text/css" />
    <script type="text/javascript" src="jquery-1.11.3.min.js" charset="UTF-8"></script>
    <script>

        var isAndroid = false;
		var currentRegion = "";

		// on document ready
		$(function() {
			// reset opacity
			//$("body").css({"opacity": "1"});
			if (typeof Android != 'undefined') {
				isAndroid = true;
			}

			if (isAndroid) {
				// register function to Android JavascriptInterface.java
				Android.setOnBleChanged("onRegionChanged");
				Android.onDocumentLoadDone();
			}
		});

		function setSVGLoad(svg, region) {
			$("body").load(svg, function() {
				// execute after floorplan.svg loaded
				onRegionChanged(region);
			});
		}

		function loadSVGLater()
		{
			setTimeout('Android.onDocumentLoadDone()', 100);
		}


		function addLeadingZeros (n, length) {
			var str = (n > 0 ? n : -n) + "";
			var zeros = "";
			for (var i = length - str.length; i > 0; i--)  {
				zeros += "0";
			}
			zeros += str;
			return n >= 0 ? zeros : "-" + zeros;
		}

		function hideCurrentRegion() {
			// show blue pin on the label
			$("#" + currentRegion + "_x5F_inactive").css("display", "inline");
			// hide orange pin on label
			$("#" + currentRegion + "_x5F_active").css("display", "none");

			// hide region block on the map
			$("#" + currentRegion).css("display", "none");
			$("#" + currentRegion).attr("class", "");
			// hide region pin on the map
			$("#pin_x5F_" + currentRegion).css("display", "none");
			$("#pin_x5F_" + currentRegion).attr("class", "");
		}

		function showNewRegion() {
			// hide blue pin on label
			$("#" + currentRegion + "_x5F_inactive").css("display", "none");
			// show orange pin on label
			$("#" + currentRegion + "_x5F_active").css("display", "inline");

			// show orange region
			$("#" + currentRegion).css("display", "inline").attr("class", "fadeinAndBlinkClass");
			$("#pin_x5F_" + currentRegion).css("display", "inline").attr("class", "fadeinClass");
		}

		function onRegionChanged(region) {
			if (region >= 0) {
				var regionStr = "area" + addLeadingZeros(region + 1, 2);
				if (currentRegion != "") {
					hideCurrentRegion();
				}
				// update current region
				currentRegion = regionStr;
				showNewRegion();

				$("#" + regionStr + ", #pin_x5F_" + regionStr).click(function() {
					$('body').fadeOut(1000, function() {
						// fadeout completion
						if (isAndroid) {
							Android.onRegionClick(region);
						}
					});
				});
			}
		}
		function onResumeMap() {
			$('body').fadeIn(1000);
		}

    </script>
</head>

<body style="margin:0;padding:0;">


</body>
</html>