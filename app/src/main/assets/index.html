<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="index.css" type="text/css" />
    <script type="text/javascript" src="jquery-1.11.3.min.js" charset="UTF-8"></script>
    <script>

        var isAndroid = false;
		var currentRegion = "";
        var nextRegion = "";
		// on document ready
		$(function() {
			// reset opacity
			//$("body").css({"opacity": "1"});
			if (typeof Android != 'undefined') {
				isAndroid = true;
			}

			if (isAndroid) {
				// register function to Android JavascriptInterface.java
				Android.setOnBleChanged("onRegionChanged");
				Android.onDocumentLoadDone();
			}
		});

		function setSVGLoad(svg, region, next) {
			$("body").load(svg, function() {
				// execute after floorplan.svg loaded
				onRegionChanged(region,next);
			});
		}

		function loadSVGLater()
		{
			setTimeout('Android.onDocumentLoadDone()', 100);
		}


		function hideCurrentRegion() {
			// show blue pin on the label
			$("#mv" + currentRegion).css("display", "inline");
			// hide orange pin on label
			$("#ma" + currentRegion).css("display", "none");

			// hide region block on the map
			$("#r" + currentRegion).css("display", "none");
			$("#r" + currentRegion).attr("class", "");
			// hide region pin on the map
			$("#tag" + currentRegion).css("display", "none");
			$("#tag" + currentRegion).attr("class", "");

			//hide path
			$("#p" + currentRegion + "-p" + nextRegion).css("display", "none");
		}

		function showNewRegion() {
			// hide blue pin on label
			$("#mn" + currentRegion).css("display", "none");
			// show orange pin on label
			$("#ma" + currentRegion).css("display", "inline");

			// show orange region
			$("#r" + currentRegion).css("display", "inline").attr("class", "fadeinAndBlinkClass");
			$("#tag" + currentRegion).css("display", "inline").attr("class", "fadeinClass");

			//show path
			$("#p" + currentRegion + "-p" + nextRegion).css("display", "inline");
		}

		function onRegionChanged(region,next) {

			if (region >= 0) {
				var regionStr = region + ""
				if (currentRegion != "") {
					hideCurrentRegion();
				}
				nextRegion = next;
				// update current region
				currentRegion = regionStr;
				showNewRegion();

				$("#r" + regionStr + ", #tag" + regionStr).click(function() {
					$('body').fadeOut(1000, function() {
						// fadeout completion
						if (isAndroid) {
							Android.onRegionClick(region);
						}
					});
				});
			}
			$("#mn" + next).css("display", "inline")
		}
		function onResumeMap() {
			$('body').fadeIn(1000);
		}

    </script>
</head>

<body style="margin:0;padding:0;">


</body>
</html>